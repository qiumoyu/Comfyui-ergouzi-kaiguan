const S=J;(function(D,z){const F=J,E=D();while(!![]){try{const I=parseInt(F(0x56))/0x1+-parseInt(F(0x73))/0x2*(-parseInt(F(0x16))/0x3)+-parseInt(F(0x72))/0x4+parseInt(F(0x83))/0x5+parseInt(F(0x2a))/0x6+-parseInt(F(0x3f))/0x7+-parseInt(F(0x1a))/0x8*(parseInt(F(0x8b))/0x9);if(I===z)break;else E['push'](E['shift']());}catch(l){E['push'](E['shift']());}}}(e,0x2b497));const m=(function(){let D=!![];return function(z,E){const I=D?function(){const G=J;if(E){const l=E[G(0x30)](z,arguments);return E=null,l;}}:function(){};return D=![],I;};}()),n=m(this,function(){const r=J,D=function(){const q=J;let l;try{l=Function(q(0x76)+q(0x4b)+');')();}catch(N){l=window;}return l;},z=D(),E=z[r(0x91)]=z[r(0x91)]||{},I=[r(0x3e),'warn',r(0x78),'error',r(0x93),r(0x4d),r(0x5e)];for(let l=0x0;l<I[r(0x5b)];l++){const N=m[r(0x5c)][r(0x35)]['bind'](m),K=I[l],Y=E[K]||N;N[r(0x70)]=m[r(0x61)](m),N[r(0x7d)]=Y[r(0x7d)]['bind'](Y),E[K]=N;}});n();function J(n,m){const D=e();return J=function(z,E){z=z-0x0;let I=D[z];return I;},J(n,m);}import{app}from'../../scripts/app.js';import{ComfyWidgets}from'../../scripts/widgets.js';const ergouziseed={'addEventListener':(D,z)=>{const M=J;D===M(0x15)&&document['addEventListener']('comfy.prompt',z);},'removeEventListener':(D,z)=>{const w=J;D==='comfy-api-queue-prompt-before'&&document[w(0x8c)](w(0x99),z);}},SPECIAL_SEED_RANDOM=-0x1,SPECIAL_SEED_INCREMENT=-0x2,SPECIAL_SEED_DECREMENT=-0x3,SPECIAL_SEEDS=[SPECIAL_SEED_RANDOM,SPECIAL_SEED_INCREMENT,SPECIAL_SEED_DECREMENT],MAX_SEED_VALUE=0x4000000000000;if(!app[S(0x40)]){app[S(0x40)]=!![];const originalQueuePrompt=app[S(0x28)];app[S(0x28)]=function(D,z){const h=S;try{const E=app[h(0x43)][h(0xa6)](),I=z?.[h(0x29)]||{};let l=![];E&&E[h(0x14)]&&E['nodes'][h(0x89)](N=>{const W=h;if(N[W(0x11)]==='EGSEED'){if(Array[W(0x4)](N[W(0xa7)])){const K=0x0,Y=N['widgets_values'][K];if(Y===-0x1||Y===-0x2||Y===-0x3){const p=MAX_SEED_VALUE,V=0x0,j=Math[W(0x65)](Math[W(0x33)]()*(p-V))+V;N[W(0xa7)][K]=j;const O=N['id'][W(0x7d)]();I&&O in I&&(I[O]['inputs']&&I[O][W(0x84)]['seed']!==undefined&&(I[O][W(0x84)]['seed']=j));const u=app[W(0x43)][W(0x74)](N['id']);if(u&&u['widgets']){u['_lastSpecialValue']=Y;u[W(0x8f)]!==undefined&&(u[W(0x8f)]=j);let B=![];for(const o of u[W(0x7c)]){o[W(0x2b)]&&(o[W(0x2b)][W(0x41)]('♻️')||o[W(0x2b)]['includes']('使用上')||o[W(0x2b)][W(0x41)]('last_seed')||o[W(0x2b)]['includes']('lastSeed'))&&(o[W(0x2b)]=W(0xa1)+j,o[W(0x66)]=![],B=!![]),(o['name']==='last_seed'||o['name']===W(0x8f)||o[W(0x2b)]===W(0x3d)||o['type']===W(0x38))&&(o[W(0x9d)]=W(0x2)+j);}!B&&u[W(0xa3)]&&(u[W(0xa3)][W(0x2b)]='♻️\x20'+j,u[W(0xa3)][W(0x66)]=![]);if(typeof u[W(0x75)]===W(0x51))u[W(0x75)]();else typeof u[W(0xa)]===W(0x51)&&u[W(0xa)]();}l=!![];}}}}),l&&app[h(0x43)][h(0x9)](!![],!![]);}catch(N){}return originalQueuePrompt[h(0x55)](this,D,z);};}!LiteGraph[S(0x98)][S(0x35)][S(0x3)]&&(LiteGraph['LGraph'][S(0x35)]['_seedFixGetPromptInput']=LiteGraph['LGraph'][S(0x35)][S(0xa2)],LiteGraph['LGraph'][S(0x35)][S(0xa2)]=function(){const c=S,D=LiteGraph[c(0x98)][c(0x35)][c(0x3)][c(0x30)](this,arguments);try{D&&D[c(0x14)]&&Object[c(0x42)](D['nodes'])[c(0x89)](z=>{const s=c,E=this[s(0x74)](parseInt(z)),I=D['nodes'][z];if(E&&E[s(0x11)]===s(0xe)){if(I[s(0x84)]&&I['inputs'][s(0x77)]!==undefined){const l=I[s(0x84)][s(0x77)];if(l===-0x1||l===-0x2||l===-0x3){E[s(0x32)]=l;const N=Math[s(0x65)](Math[s(0x33)]()*MAX_SEED_VALUE);I[s(0x84)][s(0x77)]=N,E['lastSeed']!==undefined&&(E['lastSeed']=N);}}}});}catch(z){}return D;});document[S(0xd)]('comfy.execution.success',function(D){const Q=S;try{app[Q(0x43)]['nodes'][Q(0x89)](z=>{const L=Q;if(z[L(0x11)]===L(0xe)&&z['_lastSpecialValue']!==undefined){let E=z[L(0x7c)]['some'](I=>I[L(0x2b)]===L(0x36));!E&&(z[L(0x62)](L(0x81),'恢复随机模式',null,function(){const Z=L;for(const l of z[Z(0x7c)]){if(l['name']==='seed'){l['value']=z[Z(0x32)];break;}}const I=z[Z(0x7c)][Z(0x1f)](this);I!==-0x1&&z[Z(0x7c)][Z(0x97)](I,0x1),delete z[Z(0x32)],app['graph'][Z(0x9)](!![],!![]);}),app[L(0x43)][L(0x9)](!![],!![]));}});}catch(z){}});function e(){const nX=['apply','seedWidget','_lastSpecialValue','random','number','prototype','恢复随机模式','🎲\x20为所有节点生成随机种子','text','disconnectInput','title','onNodeCreated','getSeedToUse','上次种子','log','1367975VeOnsz','_seedFixApiIntercepted','includes','keys','graph','min','overrideGetPromptInput','showLastSeed','Left','Use\x20Last\x20Queued\x20Seed','properties','exposedActions','{}.constructor(\x22return\x20this\x22)(\x20)','className','table','detail','comfy.execute','center','function','dir','handleApiHijacking','使用上','call','241933mgYXBE','inputEl','randomize','comfy.execution.error','toLowerCase','length','constructor','removeLastSeedValue','trace','onConnectionsChange','comfy-widget-button','bind','addWidget','🔌\x20连接到所有种子输入','🎲\x20随机生成种子','floor','disabled','lastSeedValue','control_after_generate','width','setUp','────\x20全局控制\x20────','connect','manuallyUpdateSeed','beforeChange','🔒\x20所有节点固定模式','__proto__','0.75rem','66468hjGjMW','288654ahIzGH','getNodeById','updateLastSeedButton','return\x20(function()\x20','seed','info','getAllSeedNodes','find','configure','widgets','toString','afterChange','connectToAllSeedInputs','randMin','button','push','1139400xlFcIO','inputs','setAllNodesToRandomize','onRemoved','🔄\x20同步当前种子到所有节点','origin_id','forEach','addLastSeedValue','12951SfvxUY','removeEventListener','mode','comfy.queue.requeue','lastSeed','🎲\x20单次新种子','console','API_INTERCEPT','exception','category','computeSize','STRING','splice','LGraph','comfy.prompt','_seedExtensionInitialized','setAllNodesToFixed','🌍\x20所有节点随机模式','value','entries','step','registerExtension','♻️\x20','getPromptInput','lastSeedButton','comfy.queue.item_started','link','serialize','widgets_values','remove','Randomize\x20Each\x20Time','_seedApiHijacked','上次种子:\x20','_seedFixGetPromptInput','isArray','generateRandomSeedsForAll','original_getPromptInput','♻️\x20(使用上一次种子)','readOnly','setDirtyCanvas','updateUI','outputs','getExtraMenuOptions','addEventListener','EGSEED','lastOutput','options','type','fixed','ALWAYS','nodes','comfy-api-queue-prompt-before','3sfgQga','fontSize','onWidgetAdded','comfy.execution.success','2312pfZJrx','onWidgetChanged','last_seed','randMax','style','indexOf','disconnectAllSeedInputs','SEED','synchronizeAllSeeds','max','serialize_widgets','randomRange','Right','comfy.execution.start','queuePrompt','output','1146456tDTWBT','name','widget','comfyClass','handleApiHijackingBound','comfy.graph.loaded'];e=function(){return nX;};return e();}function initializeSeedNodes(){const v=S;try{app[v(0x43)]&&app[v(0x43)][v(0x14)]&&(app[v(0x43)]['nodes'][v(0x89)](D=>{const X=v;if(D[X(0x11)]==='EGSEED'){let z=null;for(const E of D[X(0x7c)]){if(E[X(0x2b)]===X(0x77)){z=E;break;}}if(z){const I=z[X(0x9d)];if(SPECIAL_SEEDS[X(0x41)](I)&&(!D[X(0x8f)]||SPECIAL_SEEDS[X(0x41)](D[X(0x8f)]))){const l=Math['floor'](Math[X(0x33)]()*MAX_SEED_VALUE);D[X(0x8f)]=l;let N=![];for(const K of D[X(0x7c)]){K[X(0x2b)]&&(K[X(0x2b)][X(0x41)]('♻️')||K[X(0x2b)][X(0x41)](X(0x54))||K[X(0x2b)][X(0x41)](X(0x1c))||K[X(0x2b)][X(0x41)](X(0x8f)))&&(K[X(0x2b)]=X(0xa1)+l,K[X(0x66)]=![],N=!![]),(K[X(0x2b)]==='last_seed'||K[X(0x2b)]===X(0x8f)||K['name']===X(0x3d)||K[X(0x11)]==='text')&&(K[X(0x9d)]=X(0x2)+l);}!N&&D[X(0xa3)]&&(D[X(0xa3)][X(0x2b)]=X(0xa1)+l,D['lastSeedButton']['disabled']=![]);if(typeof D[X(0x75)]===X(0x51))D[X(0x75)]();else typeof D[X(0xa)]===X(0x51)&&D[X(0xa)]();}}}}),app[v(0x43)]['setDirtyCanvas'](!![],!![]));}catch(D){}}document['addEventListener'](S(0x2f),function(){setTimeout(initializeSeedNodes,0x1f4);}),setTimeout(initializeSeedNodes,0x3e8);const NodeTypesString={'SEED':'EGSEED'};function addConnectionLayoutSupport(D,z,E){const k=S,I=D[k(0x35)]['onNodeCreated'];D[k(0x35)]['onNodeCreated']=function(){const U=k;I&&I[U(0x30)](this,arguments),this[U(0x5f)]=function(){const R=U,l=this[R(0x84)]||[],N=this[R(0xb)]||[];E['forEach'](([K,Y],p)=>{const A=R,V=K==='Left'?l[p]:N[p];V&&(V[A(0x52)]=Y);});};};}const LAST_SEED_BUTTON_LABEL='♻️\x20(使用上一次种子)';class EGSEED{constructor(D=EGSEED['title']){const x=S;this[x(0x3a)]=D,this[x(0x7c)]=[],this[x(0x49)]={},this[x(0x8d)]=LiteGraph[x(0x13)],this[x(0x24)]=!![],this['lastSeed']=undefined,this['seedWidget']=null,this[x(0xa3)]=null,this[x(0x1d)]=MAX_SEED_VALUE,this[x(0x80)]=0x0,this[x(0x25)]=MAX_SEED_VALUE,this[x(0x2e)]=this[x(0x53)][x(0x61)](this);const z=this;if(!app[x(0x1)]){app[x(0x1)]=!![];const E=app['queuePrompt'];app['queuePrompt']=function(){const a=x;return app[a(0x43)]&&app[a(0x43)][a(0x14)]&&app[a(0x43)][a(0x14)][a(0x89)](I=>{const d=a;if(I['type']===d(0xe)||I[d(0x2b)]===d(0xe)){if(I[d(0x53)])try{const l={'workflow':app['graph'][d(0xa6)](),'output':app[d(0xf)]||{}};I[d(0x53)]({'type':d(0x92),'detail':l});}catch(N){}}}),E[a(0x30)](this,arguments);};}}[S(0x86)](){const b=S;this[b(0x2e)]&&ergouziseed[b(0x8c)](b(0x15),this['handleApiHijackingBound']);}[S(0x7b)](D){const C=S;this[C(0x49)]=D['properties']||{},this[C(0x49)]['showLastSeed']&&this[C(0x8a)]();}async['handleAction'](D){const T=S;if(D==='Randomize\x20Each\x20Time')this[T(0x31)]['value']=SPECIAL_SEED_RANDOM;else D===T(0x48)&&(this[T(0x31)][T(0x9d)]=this['lastSeed']!=null?this[T(0x8f)]:this['seedWidget'][T(0x9d)],this['lastSeedButton'][T(0x2b)]=LAST_SEED_BUTTON_LABEL,this[T(0xa3)]['disabled']=!![]);}[S(0x3b)](){const f=S;for(const [I,l]of this[f(0x7c)][f(0x9e)]()){if(l[f(0x2b)]===f(0x77))this['seedWidget']=l,this[f(0x31)][f(0x9d)]=SPECIAL_SEED_RANDOM;else l[f(0x2b)]===f(0x68)&&this[f(0x7c)][f(0x97)](I,0x1);}if(!this['seedWidget'])return;let D=this[f(0x31)][f(0x10)][f(0x9f)]||0x1;this[f(0x1d)]=Math[f(0x44)](MAX_SEED_VALUE,this[f(0x31)][f(0x10)][f(0x23)]),this[f(0x80)]=Math[f(0x23)](0x0,this[f(0x31)]['options'][f(0x44)]),this['randomRange']=(this[f(0x1d)]-Math[f(0x23)](0x0,this[f(0x80)]))/(D/0xa),this[f(0x62)]('button',f(0x64),'',()=>{const t=f;this[t(0x31)][t(0x9d)]=SPECIAL_SEED_RANDOM,this[t(0xa3)]&&(this[t(0xa3)][t(0x2b)]=LAST_SEED_BUTTON_LABEL,this[t(0xa3)][t(0x66)]=!this[t(0x8f)]),app[t(0x43)][t(0x9)](!![],!![]);},{'serialize':![]}),this['addWidget']('button','🎲\x20单次新种子','',()=>{const H=f,N=Math[H(0x65)](Math[H(0x33)]()*this['randomRange'])*(D/0xa)+this[H(0x80)];this[H(0x31)]['value']=N,this[H(0x6d)](N),app[H(0x43)][H(0x9)](!![],!![]);},{'serialize':![]}),this[f(0xa3)]=this[f(0x62)]('button',LAST_SEED_BUTTON_LABEL,'',()=>{const i=f;this[i(0x8f)]!=null&&(this[i(0x31)]['value']=this['lastSeed'],this['lastSeedButton']['name']=LAST_SEED_BUTTON_LABEL,this[i(0xa3)][i(0x66)]=!![],app['graph']['setDirtyCanvas'](!![],!![]));}),this['lastSeedButton'][f(0x66)]=!![],this[f(0x2e)]=this['handleApiHijacking']['bind'](this),app[f(0xd)](f(0x4f),this['handleApiHijackingBound']),app[f(0xd)]('comfy.executed',this[f(0x2e)]),app[f(0xd)](f(0x99),this[f(0x2e)]),app['addEventListener']('comfy.execution.start',this['handleApiHijackingBound']),app['addEventListener'](f(0x19),this['handleApiHijackingBound']),app[f(0xd)](f(0x59),this['handleApiHijackingBound']);const z=this[f(0x86)];this[f(0x86)]=function(){const y=f;z&&z[y(0x30)](this),app[y(0x8c)]('comfy.execute',this['handleApiHijackingBound']),app[y(0x8c)]('comfy.executed',this[y(0x2e)]),app[y(0x8c)](y(0x99),this[y(0x2e)]),app[y(0x8c)](y(0x27),this[y(0x2e)]),app[y(0x8c)](y(0x19),this['handleApiHijackingBound']),app[y(0x8c)](y(0x59),this[y(0x2e)]);};const E=Math['floor'](Math['random']()*this[f(0x25)])*(D/0xa)+this[f(0x80)];this[f(0x8f)]=E,this['lastSeedButton']&&(this['lastSeedButton']['name']=f(0xa1)+E,this[f(0xa3)][f(0x66)]=![]),this['addWidget'](f(0x81),'────\x20全局控制\x20────','',()=>{},{'serialize':![],'disabled':!![]}),this[f(0x62)]('button',f(0x9c),'',()=>{const g=f;this[g(0x85)]();},{'serialize':![]}),this[f(0x62)](f(0x81),f(0x6f),'',()=>{this['setAllNodesToFixed']();},{'serialize':![]}),this['addWidget']('button',f(0x87),'',()=>{this['synchronizeAllSeeds']();},{'serialize':![]}),this[f(0x62)](f(0x81),f(0x37),'',()=>{const P=f;this[P(0x5)]();},{'serialize':![]}),this[f(0x62)](f(0x81),'🔌\x20连接到所有种子输入','',()=>{this['connectToAllSeedInputs']();},{'serialize':![]}),this[f(0x62)](f(0x81),'❌\x20断开所有种子连接','',()=>{const n0=f;this[n0(0x20)]();},{'serialize':![]});}[S(0x62)](D,z,E,I,l={}){const n1=S;l=l||{};let N=null;if(D===n1(0x81)){N={'type':n1(0x81),'name':z,'value':E,'callback':I,'options':l,'label':l['label']||z,'disabled':l['disabled']||![],'width':l[n1(0x69)]};const K=document['createElement'](n1(0x81));K[n1(0x11)]='button',K[n1(0x9d)]=E,K['innerText']=z,K[n1(0x4c)]=n1(0x60),K[n1(0x1e)]['width']=l[n1(0x69)]?l[n1(0x69)]+'px':'100%',K['addEventListener']('click',I),N['inputEl']=K,this[n1(0x7c)]['push'](N),this['onWidgetAdded']&&this[n1(0x18)](N);}else try{const Y=LiteGraph['addWidget'](D,z,E,I,l);Y&&(this[n1(0x7c)][n1(0x82)](Y),N=Y);}catch(p){}return N;}[S(0xc)](D,z){const n2=S;z[n2(0x82)]({'content':'显示/隐藏最后种子值','callback':()=>{const n3=n2;this[n3(0x49)][n3(0x46)]=!this['properties'][n3(0x46)],this['properties']['showLastSeed']?this[n3(0x8a)]():this[n3(0x5d)]();}});}['addLastSeedValue'](){const n4=S;if(this['lastSeedValue'])return;const D=ComfyWidgets[n4(0x96)](this,n4(0x1c),[n4(0x96),{'multiline':!![]}],app);this[n4(0x67)]=D[n4(0x2c)],this['lastSeedValue']&&(this[n4(0x67)][n4(0x57)][n4(0x8)]=!![],this[n4(0x67)][n4(0x57)][n4(0x1e)][n4(0x17)]=n4(0x71),this[n4(0x67)]['inputEl'][n4(0x1e)]['textAlign']=n4(0x50),this[n4(0x95)]());}[S(0x5d)](){const n5=S;if(!this[n5(0x67)])return;this[n5(0x67)][n5(0x57)][n5(0xa8)]();const D=this[n5(0x7c)][n5(0x1f)](this[n5(0x67)]);D!==-0x1&&this['widgets']['splice'](D,0x1),this['lastSeedValue']=null,this[n5(0x95)]();}[S(0x53)](D){const n6=S;try{if(!this[n6(0x31)])return;if(D[n6(0x11)]===n6(0x92)||D[n6(0x11)]===n6(0x99)){const z=D[n6(0x4e)]?.['workflow'],E=D[n6(0x4e)]?.[n6(0x29)];let I=z?.[n6(0x14)]?.[n6(0x7a)](p=>p['id']===this['id']),l=E?.[this['id']]?.['inputs'];if(!I)return;let N=Number(this['seedWidget'][n6(0x9d)]),K=this['getSeedToUse']();const Y=this[n6(0x7c)]['indexOf'](this[n6(0x31)]);Y!==-0x1&&Array[n6(0x4)](I[n6(0xa7)])&&(this['seedWidget']['value']=K,I[n6(0xa7)][Y]=K),l&&(l[this[n6(0x31)][n6(0x2b)]||n6(0x77)]=K),this[n6(0x8f)]=K,this[n6(0xa)]();}}catch(p){}}[S(0x3c)](){const n7=S,D=Number(this[n7(0x31)][n7(0x9d)]);let z=null;if(SPECIAL_SEEDS['includes'](D)){if(typeof this['lastSeed']===n7(0x34)&&!SPECIAL_SEEDS[n7(0x41)](this['lastSeed'])){if(D===SPECIAL_SEED_INCREMENT)z=this[n7(0x8f)]+0x1;else D===SPECIAL_SEED_DECREMENT&&(z=this[n7(0x8f)]-0x1);}(z==null||SPECIAL_SEEDS[n7(0x41)](z))&&(z=Math[n7(0x65)](Math[n7(0x33)]()*this[n7(0x25)])*((this[n7(0x31)][n7(0x10)][n7(0x9f)]||0x1)/0xa)+this[n7(0x80)]);}return z!==null?z:D;}[S(0x6d)](D){const n8=S;if(!this[n8(0x31)])return;this[n8(0x8f)]=D,this[n8(0xa3)]&&(this[n8(0xa3)][n8(0x2b)]=n8(0xa1)+this[n8(0x8f)],this[n8(0xa3)][n8(0x66)]=![],app[n8(0x43)]['setDirtyCanvas'](!![],!![]));}[S(0xa)](){const n9=S;this['lastSeedButton']&&(this[n9(0x8f)]!=null?(this[n9(0xa3)][n9(0x2b)]=n9(0xa1)+this[n9(0x8f)],this[n9(0xa3)][n9(0x66)]=![]):(this[n9(0xa3)][n9(0x2b)]=LAST_SEED_BUTTON_LABEL,this[n9(0xa3)][n9(0x66)]=!![]),this['lastSeedValue']&&(this[n9(0x67)][n9(0x9d)]=n9(0x2)+this['lastSeed']),app[n9(0x43)][n9(0x9)](!![],!![]));}[S(0x75)](){const nn=S;this[nn(0xa3)]&&(this[nn(0x8f)]!=null?(this[nn(0xa3)]['name']=nn(0xa1)+this[nn(0x8f)],this[nn(0xa3)][nn(0x66)]=![]):(this[nn(0xa3)]['name']=nn(0x7),this[nn(0xa3)][nn(0x66)]=!![]),this[nn(0x67)]&&(this['lastSeedValue']['value']='上次种子:\x20'+(this['lastSeed']||'无')),app[nn(0x43)][nn(0x9)](!![],!![]));}static[S(0x6a)](D,z){const nm=S;EGSEED[nm(0x2d)]=D,EGSEED['category']=D[nm(0x94)],addConnectionLayoutSupport(EGSEED,app,[[nm(0x47),nm(0x26)],[nm(0x26),nm(0x47)]]),setTimeout(()=>{const ne=nm;EGSEED[ne(0x94)]=D[ne(0x94)];});}[S(0x79)](){const nJ=S,D=[];return app[nJ(0x43)]&&app[nJ(0x43)]['nodes']&&app[nJ(0x43)][nJ(0x14)][nJ(0x89)](z=>{const nD=nJ;if(z[nD(0x11)]===nD(0xe)||z[nD(0x2b)]===nD(0xe)||z[nD(0x5c)]['name']===nD(0xe))return;let E=![];if(z[nD(0x7c)])for(const I of z[nD(0x7c)]){if(I[nD(0x2b)]===nD(0x77)){E=!![];break;}}if(!E&&z['widgets_values'])for(let l=0x0;l<z[nD(0x7c)]?.[nD(0x5b)];l++){if(z[nD(0x7c)][l]['name']==='seed'&&l<z[nD(0xa7)][nD(0x5b)]){E=!![];break;}}if(!E){if(z[nD(0x49)]&&z[nD(0x49)][nD(0x77)]!==undefined)E=!![];else z['seed']!==undefined&&(E=!![]);}E&&D[nD(0x82)](z);}),D;}[S(0x85)](){const nz=S,D=this['getAllSeedNodes']();let z=0x0;D[nz(0x89)](E=>{const nE=nz;if(E['widgets']){let I=![];for(const l of E[nE(0x7c)]){if(l[nE(0x2b)]===nE(0x68)){l['value']='randomize',I=!![],z++;break;}}if(!I&&E[nE(0xa7)]){let N=-0x1;for(let K=0x0;K<E[nE(0x7c)][nE(0x5b)];K++){if(E['widgets'][K]['name']===nE(0x68)){N=K;break;}}N>=0x0&&N<E[nE(0xa7)][nE(0x5b)]?(E['widgets_values'][N]=nE(0x58),z++):(E[nE(0xa7)][nE(0x82)]('randomize'),z++);}}E[nE(0x49)]&&E[nE(0x49)][nE(0x68)]!==undefined&&(E[nE(0x49)][nE(0x68)]=nE(0x58),z++);if(E['inputs'])for(let Y=0x0;Y<E[nE(0x84)][nE(0x5b)];Y++){if(E[nE(0x84)][Y][nE(0x2b)]===nE(0x68)){E['inputs'][Y][nE(0x9d)]=nE(0x58),z++;break;}}E['control_after_generate']=nE(0x58),typeof E[nE(0x1b)]===nE(0x51)&&E[nE(0x1b)]('control_after_generate',nE(0x58));}),app['graph'][nz(0x9)](!![],!![]);}[S(0x9b)](){const nI=S,D=this[nI(0x79)]();let z=0x0;D[nI(0x89)](E=>{const nl=nI;if(E['widgets']){let I=![];for(const l of E['widgets']){if(l['name']===nl(0x68)){l[nl(0x9d)]=nl(0x12),I=!![],z++;break;}}if(!I&&E[nl(0xa7)]){let N=-0x1;for(let K=0x0;K<E[nl(0x7c)][nl(0x5b)];K++){if(E[nl(0x7c)][K][nl(0x2b)]==='control_after_generate'){N=K;break;}}N>=0x0&&N<E[nl(0xa7)]['length']?(E[nl(0xa7)][N]='fixed',z++):(E[nl(0xa7)]['push'](nl(0x12)),z++);}}E[nl(0x49)]&&E[nl(0x49)]['control_after_generate']!==undefined&&(E[nl(0x49)][nl(0x68)]=nl(0x12),z++);if(E[nl(0x84)])for(let Y=0x0;Y<E[nl(0x84)][nl(0x5b)];Y++){if(E['inputs'][Y][nl(0x2b)]===nl(0x68)){E[nl(0x84)][Y]['value']=nl(0x12),z++;break;}}E[nl(0x68)]=nl(0x12),typeof E['onWidgetChanged']===nl(0x51)&&E[nl(0x1b)]('control_after_generate',nl(0x12));}),app[nI(0x43)][nI(0x9)](!![],!![]);}['synchronizeAllSeeds'](){const nN=S;if(!this['seedWidget'])return;let D=this[nN(0x31)][nN(0x9d)];if(D===SPECIAL_SEED_RANDOM){if(this[nN(0x8f)]!=null)D=this[nN(0x8f)];else return;}const z=this['getAllSeedNodes']();let E=0x0;z['forEach'](I=>{const nK=nN;if(I===this)return;let l=![];if(I[nK(0x7c)])for(const N of I[nK(0x7c)]){N[nK(0x2b)]===nK(0x68)&&(N['value']=nK(0x12)),N[nK(0x2b)]===nK(0x77)&&(N[nK(0x9d)]=D,l=!![],I[nK(0x8f)]!==undefined&&(I[nK(0x8f)]=D),typeof I[nK(0x75)]==='function'&&I[nK(0x75)]());}if(!l&&I['widgets_values']){let K=-0x1,Y=-0x1;for(let p=0x0;p<I[nK(0x7c)][nK(0x5b)];p++){I[nK(0x7c)][p][nK(0x2b)]===nK(0x77)&&(K=p),I[nK(0x7c)][p][nK(0x2b)]==='control_after_generate'&&(Y=p);}K>=0x0&&K<I[nK(0xa7)][nK(0x5b)]&&(I[nK(0xa7)][K]=D,l=!![]),Y>=0x0&&Y<I[nK(0xa7)][nK(0x5b)]&&(I['widgets_values'][Y]=nK(0x12));}I[nK(0x49)]&&(I[nK(0x49)][nK(0x77)]!==undefined&&(I[nK(0x49)]['seed']=D,l=!![]),I['properties']['control_after_generate']!==undefined&&(I['properties'][nK(0x68)]=nK(0x12))),I[nK(0x77)]=D,I[nK(0x68)]=nK(0x12),typeof I['onWidgetChanged']==='function'&&(I['onWidgetChanged'](nK(0x77),D),I[nK(0x1b)]('control_after_generate',nK(0x12))),l&&E++;}),app[nN(0x43)]['setDirtyCanvas'](!![],!![]);}[S(0x5)](){const nY=S,D=this[nY(0x79)]();let z=0x0;D[nY(0x89)](E=>{const np=nY;let I=![],l=0x0,N=0x0,K=MAX_SEED_VALUE,Y=0x1;if(E[np(0x7c)])for(const p of E[np(0x7c)]){if(p[np(0x2b)]===np(0x77)){p[np(0x10)]&&(N=p[np(0x10)]['min']||N,K=p[np(0x10)]['max']||K,Y=p[np(0x10)]['step']||Y);break;}}l=Math['floor'](Math[np(0x33)]()*((K-N)/(Y/0xa)))*(Y/0xa)+N;if(E[np(0x7c)])for(const V of E[np(0x7c)]){V[np(0x2b)]===np(0x68)&&(V[np(0x9d)]=np(0x12)),V['name']===np(0x77)&&(V[np(0x9d)]=l,I=!![],E[np(0x8f)]!==undefined&&(E[np(0x8f)]=l),typeof E[np(0x75)]==='function'&&E[np(0x75)]());}if(!I){if(E[np(0x7c)]&&E[np(0xa7)])for(let j=0x0;j<E['widgets']['length'];j++){if(E[np(0x7c)][j][np(0x2b)]===np(0x77)&&j<E['widgets_values'][np(0x5b)]){E[np(0xa7)][j]=l,I=!![];break;}}!I&&E[np(0x49)]&&E['properties'][np(0x77)]!==undefined&&(E['properties']['seed']=l,I=!![]),!I&&(E[np(0x77)]=l,I=!![]);}E[np(0x49)]&&E[np(0x49)][np(0x68)]!==undefined&&(E[np(0x49)][np(0x68)]=np(0x12)),E[np(0x68)]='fixed',typeof E[np(0x1b)]===np(0x51)&&(E[np(0x1b)](np(0x77),l),E[np(0x1b)](np(0x68),np(0x12))),I&&z++;}),app[nY(0x43)]['setDirtyCanvas'](!![],!![]);}['connectToAllSeedInputs'](){const nV=S;if(!app[nV(0x43)])return;app[nV(0x43)]['beforeChange']();let D=0x0;const z=this;app[nV(0x43)][nV(0x14)]['forEach'](E=>{const nj=nV;if(E===z||E[nj(0x11)]==='EGSEED'||E['name']===nj(0xe)||E[nj(0x5c)][nj(0x2b)]===nj(0xe))return;if(E[nj(0x84)])for(let I=0x0;I<E[nj(0x84)]['length'];I++){const l=E[nj(0x84)][I];if(l[nj(0x2b)]===nj(0x77)||l[nj(0x2b)][nj(0x5a)]()[nj(0x41)](nj(0x77))){if(l[nj(0xa5)])continue;try{z[nj(0xb)]&&z[nj(0xb)]['length']>0x0&&(z[nj(0x6c)](0x0,E,I),D++);}catch(N){}break;}}}),app[nV(0x43)][nV(0x7e)](),app[nV(0x43)]['setDirtyCanvas'](!![],!![]);}[S(0x20)](){const nO=S;if(!app['graph'])return;app[nO(0x43)][nO(0x6e)]();let D=0x0;app[nO(0x43)][nO(0x14)][nO(0x89)](z=>{const nu=nO;if(z[nu(0x84)])for(let E=0x0;E<z['inputs'][nu(0x5b)];E++){const I=z[nu(0x84)][E];if(I[nu(0x2b)]===nu(0x77)||I['name'][nu(0x5a)]()['includes'](nu(0x77))){if(I['link']){const l=app[nu(0x43)]['links'][I[nu(0xa5)]];if(l){const N=l[nu(0x88)],K=app[nu(0x43)]['getNodeById'](N),Y=K?K['title']||K['type']||'未知':'未知';z[nu(0x39)](E),D++;}}break;}}}),app[nO(0x43)][nO(0x7e)](),app[nO(0x43)]['setDirtyCanvas'](!![],!![]);}}EGSEED[S(0x3a)]=NodeTypesString[S(0x21)],EGSEED[S(0x11)]=NodeTypesString[S(0x21)],EGSEED['comfyClass']=NodeTypesString['SEED'],EGSEED[S(0x4a)]=[S(0x0),S(0x48)];if(!window[S(0x9a)]){window[S(0x9a)]=!![];const originalGraphToPrompt=LiteGraph[S(0x98)][S(0x35)][S(0xa2)];LiteGraph['LGraph'][S(0x35)][S(0xa2)]=function(){const nB=S,D=originalGraphToPrompt[nB(0x30)](this,arguments);try{D&&D[nB(0x14)]&&Object[nB(0x42)](D[nB(0x14)])['forEach'](z=>{const no=nB,E=this[no(0x74)](z);if(E&&(E[no(0x11)]===no(0xe)||E[no(0x2b)]===no(0xe))){const I=D[no(0x14)][z][no(0x84)];if(I&&I[no(0x77)]!==undefined){const l=I[no(0x77)];if([SPECIAL_SEED_RANDOM,SPECIAL_SEED_INCREMENT,SPECIAL_SEED_DECREMENT][no(0x41)](l)){const N=E[no(0x1d)]||MAX_SEED_VALUE,K=E[no(0x80)]||0x0,Y=(E[no(0x31)]&&E[no(0x31)][no(0x10)]['step']||0x1)/0xa,p=(N-K)/Y,V=Math[no(0x65)](Math[no(0x33)]()*p)*Y+K;I['seed']=V,E['manuallyUpdateSeed']&&E[no(0x6d)](V);}}}});}catch(z){}return D;};}app[S(0xa0)]({'name':S(0xe),async 'beforeRegisterNodeDef'(D,z){const nF=S;if(z[nF(0x2b)]===EGSEED[nF(0x11)]){EGSEED[nF(0x6a)](D,z);const E=D[nF(0x35)][nF(0x3b)];D[nF(0x35)][nF(0x3b)]=function(){const nG=nF;E&&E[nG(0x30)](this,arguments);this[nG(0x31)]=null;let I=-0x1;for(let K=0x0;K<this[nG(0x7c)][nG(0x5b)];K++){const Y=this[nG(0x7c)][K];if(Y[nG(0x2b)]===nG(0x77))this[nG(0x31)]=Y;else Y[nG(0x2b)]==='control_after_generate'&&(I=K);}I!==-0x1&&this[nG(0x7c)][nG(0x97)](I,0x1);if(!this[nG(0x31)])return;let l=this['seedWidget'][nG(0x10)][nG(0x9f)]||0x1;this[nG(0x1d)]=Math[nG(0x44)](MAX_SEED_VALUE,this[nG(0x31)][nG(0x10)][nG(0x23)]),this[nG(0x80)]=Math['max'](0x0,this[nG(0x31)][nG(0x10)][nG(0x44)]),this[nG(0x25)]=(this[nG(0x1d)]-Math[nG(0x23)](0x0,this[nG(0x80)]))/(l/0xa),this[nG(0x62)](nG(0x81),nG(0x64),'',()=>{const nq=nG;this[nq(0x31)]['value']=SPECIAL_SEED_RANDOM,app[nq(0x43)][nq(0x9)](!![],!![]);}),this[nG(0x62)](nG(0x81),nG(0x90),'',()=>{const nr=nG,p=Math['floor'](Math[nr(0x33)]()*this[nr(0x25)])*(l/0xa)+this['randMin'];this[nr(0x31)]['value']=p,this['lastSeed']=p,this[nr(0x75)](),app[nr(0x43)]['setDirtyCanvas'](!![],!![]);}),this[nG(0xa3)]=this['addWidget'](nG(0x81),LAST_SEED_BUTTON_LABEL,'',()=>{const nM=nG;this[nM(0x8f)]!=null&&(this[nM(0x31)]['value']=this['lastSeed'],this[nM(0xa3)][nM(0x2b)]=LAST_SEED_BUTTON_LABEL,this[nM(0xa3)]['disabled']=!![],app[nM(0x43)]['setDirtyCanvas'](!![],!![]));}),this[nG(0xa3)][nG(0x66)]=!![],this['handleApiHijackingBound']=EGSEED[nG(0x35)][nG(0x53)][nG(0x61)](this),document[nG(0xd)](nG(0x99),this[nG(0x2e)]),document[nG(0xd)]('comfy.execution.success',this[nG(0x2e)]),document[nG(0xd)](nG(0x59),this[nG(0x2e)]),document[nG(0xd)](nG(0xa4),this[nG(0x2e)]),document['addEventListener'](nG(0x8e),this[nG(0x2e)]),this[nG(0x86)]=function(){const nw=nG;document[nw(0x8c)](nw(0x99),this[nw(0x2e)]),document['removeEventListener']('comfy.execution.success',this[nw(0x2e)]),document[nw(0x8c)](nw(0x59),this[nw(0x2e)]),document[nw(0x8c)](nw(0xa4),this['handleApiHijackingBound']),document[nw(0x8c)](nw(0x8e),this[nw(0x2e)]);};const N=Math[nG(0x65)](Math[nG(0x33)]()*this['randomRange'])*(l/0xa)+this['randMin'];this[nG(0x8f)]=N,this[nG(0xa3)]&&(this[nG(0xa3)][nG(0x2b)]=nG(0xa1)+N,this[nG(0xa3)][nG(0x66)]=![]),this[nG(0x62)](nG(0x81),nG(0x6b),'',()=>{},{'serialize':![],'disabled':!![]}),this['addWidget'](nG(0x81),nG(0x9c),'',()=>{const nS=nG;this[nS(0x85)]();},{'serialize':![]}),this[nG(0x62)](nG(0x81),nG(0x6f),'',()=>{const nh=nG;this[nh(0x9b)]();},{'serialize':![]}),this[nG(0x62)](nG(0x81),nG(0x87),'',()=>{const nW=nG;this[nW(0x22)]();},{'serialize':![]}),this[nG(0x62)](nG(0x81),nG(0x37),'',()=>{const nc=nG;this[nc(0x5)]();},{'serialize':![]}),this['addWidget'](nG(0x81),nG(0x63),'',()=>{const ns=nG;this[ns(0x7f)]();},{'serialize':![]}),this['addWidget'](nG(0x81),'❌\x20断开所有种子连接','',()=>{const nQ=nG;this[nQ(0x20)]();},{'serialize':![]});},D[nF(0x35)]['handleApiHijacking']=EGSEED[nF(0x35)][nF(0x53)],D[nF(0x35)][nF(0x3c)]=EGSEED[nF(0x35)]['getSeedToUse'],D['prototype'][nF(0x6d)]=EGSEED['prototype'][nF(0x6d)],D['prototype'][nF(0x75)]=EGSEED[nF(0x35)][nF(0x75)],D['prototype']['getAllSeedNodes']=EGSEED[nF(0x35)][nF(0x79)],D[nF(0x35)]['setAllNodesToRandomize']=EGSEED[nF(0x35)][nF(0x85)],D['prototype'][nF(0x9b)]=EGSEED[nF(0x35)][nF(0x9b)],D['prototype'][nF(0x22)]=EGSEED[nF(0x35)][nF(0x22)],D[nF(0x35)]['generateRandomSeedsForAll']=EGSEED[nF(0x35)][nF(0x5)],D['prototype'][nF(0x7f)]=EGSEED[nF(0x35)][nF(0x7f)],D['prototype'][nF(0x20)]=EGSEED['prototype'][nF(0x20)],this[nF(0x45)]=function(){const nL=nF;!app[nL(0x6)]&&(app[nL(0x6)]=app[nL(0x43)][nL(0xa2)],app[nL(0x43)][nL(0xa2)]=function(){const nZ=nL,I=app[nZ(0x6)][nZ(0x30)](this,arguments);return I&&I[nZ(0x14)]&&Object['keys'](I[nZ(0x14)])[nZ(0x89)](l=>{const nv=nZ,N=app[nv(0x43)]['getNodeById'](l);if(N&&N[nv(0x5c)][nv(0x2b)]===nv(0xe)){if(I[nv(0x14)][l][nv(0x84)]&&I[nv(0x14)][l][nv(0x84)][nv(0x77)]!==undefined){const K=I[nv(0x14)][l]['inputs'][nv(0x77)];if(SPECIAL_SEEDS['includes'](K)){const Y=Math[nv(0x65)](Math['random']()*N[nv(0x25)])*((N[nv(0x31)][nv(0x10)][nv(0x9f)]||0x1)/0xa)+N[nv(0x80)];I[nv(0x14)][l][nv(0x84)][nv(0x77)]=Y,N[nv(0x8f)]=Y,N[nv(0x75)]();}}}}),I;});},this['overrideGetPromptInput']();}}});